# 第4章 密钥、地址、钱包

## 1 简介
比特币的所有权是**通过数字密钥、比特币地址和数字签名来确立的**

数字密钥不存储在网络中，是由用户生成并存储在一个文件或简单的数据库中，称为钱包

密钥实现了比特币的许多特性：去中心化信任和控制、所有权认证、基于密码学证明的安全模型

每笔比特币交易都需要一个有效的签名才会被存储在区块链
只有有效的数字密钥才能产生有效的数字签名，因此拥有比特币的密钥副本就拥有了该账户的比特币控制权

**在比特币交易的支付环节，收件人的公钥是通过其数字指纹表示的，称为比特币地址**
一般情况下，比特币地址由一个公钥生成并对应于这个公钥（注意，一般情况下）

### 1.1 公钥加密和加密货币
比特币使用椭圆曲线乘法作为其公钥加密的基础算法。（书上如是写，现在不知道还是不是）

**在比特币系统中，我们用公钥加密算法创建一个密钥对，用于控制比特币的获取**
**密钥对包括一个私钥，和由其衍生出的唯一的公钥**
**公钥用于接收比特币，而私钥用于比特币支付时的交易签名**

支付比特币时，比特币的当前所有者需要在交易中提交其公钥和签名（每次交易签名都不同，但均从同一个私钥生成）
比特币网络中所有人都可以通过所提交的公钥和签名进行验证，并确认该交易是否有效，即确认支付者在该时刻对所交易的比特币的拥有所有权

### 1.2 私钥和公钥
一个比特币钱包中包含一系列的密钥对，每个密钥对包括一个私钥和一个公钥
私钥(k)是一个数字，通常是随机选出来的

有了私钥，我们可以使用**椭圆曲线乘法单向加密函数**产生一个公钥(K)
有了公钥，我们可以使用一个**单向加密哈希函数**生成比特币地址(A)

k -> K -> A
两个步骤都是单向加密，不可逆

### 1.3 私钥
在比特币交易中，私钥用于生成支付比特币所必需的签名以证明资金的所有权

**私钥必须始终保持机密，一旦泄露，相当于该私钥保护下的比特币也拱手相让了**

私钥可以是1~n-1之间的任何数字，n是一个常数（n=1.158 * 10^77，略小于2^256），并由比特币所使用的椭圆曲线的阶所定义。

- getnewaddress命令
- dumpprivkey命令

- 使用命令行sx工具用newkey命令生成并显示私钥

### 1.4 公钥
通过椭圆曲线算法可以从私钥计算得到公钥：K = k * G
其中K是公钥；k是私钥；G是被称为生成点的常数点

其反向运算，被称为“寻找离散对数”————已知公钥K求出私钥k————是非常困难的（暴力搜索）

### 1.5 椭圆曲线密码学解释
椭圆曲线加密法是一种基于离散对数问题的非对称（或公钥）加密法，可以用对椭圆曲线上的点进行加法或乘法运算来表达

（一些椭圆的概念没看懂）

### 1.6 生成公钥
以一个随机生成的私钥k为起点，我们将其与曲线上已定义的生成点G相乘以获取曲线上另一点，即相应的公钥K。
生成点是secp256k1标准的一部分，比特币密钥的生成点都是相同的：{K = k * G}

因为所有比特币用户的生成点是相同的，一个私钥k乘以G将得到相同的公钥K
k和K之间的关系是固定的，但只能单向运算，即从k得到K
这就是可以把比特币地址（K的衍生）与任何人共享而不会泄漏私钥（k）的原因


## 2 比特币地址


### 2.1 Base58和Base58Check编码

### 2.2 密钥的格式







































